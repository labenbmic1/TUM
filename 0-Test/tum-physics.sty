%%----------------------------------------------------------------------------------%%
%%_____           TUM physics package from Michael Labenbacher 2017           ______%%
%%----------------------------------------------------------------------------------%%
%% declaration of the required TeX-format											%%
%% LaTeX2e ... newest, stable LaTeX-release											%%
\NeedsTeXFormat{LaTeX2e}%															%%
%% version number 																	%%
\def\TUMversion{1.0.0.nightly.000000000000010}% 									%%
%% information of the provided package												%%
%% ProvidesPackage{name of the package}[YYYY/MM/DD further information]				%%
\ProvidesPackage{tum-physics}%														%%
[2018/02/26 made by Michael Labenbacher]%											%%
%% output on the command-line in the log-file										%%
\typeout{===========================================================================}%
\typeout{Main-package for the preparation of a diploma-, bachelor- or master-thesis,}%
\typeout{for: -- paper=a4,11/12pt,twoside,openright -- scrbook / scrreprt and}%	 	%%
\typeout{for: -- paper=a4,11/12pt,onside,openany -- scrbook / scrreprt optimized.}% %%
\typeout{Author: Labenbacher Michael}%							  					%%
\ProcessOptions\relax%                                                              %%
%% imakeidx, glossaries, biblatex, listings fehlt noch !!!



\makeatletter%                                                                      %%
\@ifpackageloaded{expl3}{}{%                                                        %%
    \RequirePackage{expl3}%                                                         %%
}%                                                                                  %%
%% etex = An extended version of TeX (NTS-project)                                  %%
\@ifpackageloaded{etex}{}{%                                                         %%
    \RequirePackage{etex}%                                                          %%
}%                                                                                  %%
\@ifpackageloaded{etexcmds}{}{%                                                     %%
    \RequirePackage{etexcmds}%                                                      %%
}%                                                                                  %%
%% ifxetex = Am I running under XETEX?                                              %%
%% needed by authors (pdflscape)                                                    %%
\@ifpackageloaded{ifxetex}{}{%                                                      %%
    \RequirePackage{ifxetex}%                                                       %%
}%                                                                                  %%
%% etoolbox = eTeX-tools for LaTeX                                                  %%
\@ifpackageloaded{etoolbox}{}{%                                                     %%
    \RequirePackage{etoolbox}%                                                      %%
}%                                                                                  %%
%% xparse = A generic document command parser (LaTeX3)                              %%
\@ifpackageloaded{xparse}{}{%                                                       %%
    \RequirePackage{xparse}%                                                        %%
}%                                                                                  %%
%% xparse = conditional commands in LATEX documents                                 %%
%% needed by authors (pdflscape)                                                    %%
\@ifpackageloaded{ifthen}{}{%                                                       %%
    \RequirePackage{ifthen}%                                                        %%
}%                                                                                  %%
%% calc = simple arithmetic in LATEX commands                                       %%
%% needed by authors (pdflscape)                                                    %%
\@ifpackageloaded{calc}{}{%                                                         %%
    \RequirePackage{calc}%                                                          %%
}%                                                                                  %%
\makeatother%                                                                       %%




%% amssymb, amstext, sansmath = mathematische Standardpakete                        %%
%% amsmath [intlimits] = AMS mathematical facilities for LaTeX                      %%
%% integral limits above/below                                                      %%
%% amsmath must be loaded before babel, that`s extremelly important!                %%
\PassOptionsToPackage{intlimits}{amsmath}%                                          %%
\makeatletter%                                                                      %%
\@ifpackageloaded{amsmath}{}{%                                                      %%
    \RequirePackage{amsmath}%                                                       %%
}%                                                                                  %%
\@ifpackageloaded{amssymb}{%                                                        %%
    \@ifpackageloaded{amstext}{%                                                    %%
        \@ifpackageloaded{amsthm}{}{%                                               %%
            \RequirePackage{amsthm}%                                                %%
        }%                                                                          %%
    }{%                                                                             %%
        \@ifpackageloaded{amsthm}{%                                                 %%
            \RequirePackage{amstext}%                                               %%
        }{%                                                                         %%
            \RequirePackage{amstext,amsthm}%                                        %%
        }%                                                                          %%
    }%                                                                              %%  
}{%                                                                                 %%
    \@ifpackageloaded{amstext}{%                                                    %%
        \@ifpackageloaded{amsthm}{%                                                 %%
            \RequirePackage{amssymb}%                                               %%
        }{%                                                                         %%
            \RequirePackage{amssymb,amsthm}%                                        %%
        }%                                                                          %%
    }{%                                                                             %%
        \@ifpackageloaded{amsthm}{%                                                 %%
            \RequirePackage{amssymb,amstext}%                                       %%
        }{%                                                                         %%
            \RequirePackage{amssymb,amstext,amsthm}%                                %%
        }%                                                                          %%
    }%                                                                              %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% mathtools [showonlyrefs] = Mathematical tools to use with amsmath                %%
\PassOptionsToPackage{showonlyrefs}{mathtools}%                                     %%
\makeatletter%                                                                      %%
\@ifpackageloaded{mathtools}{}{%                                                    %%
    \RequirePackage{mathtools}%                                                     %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% nccmath = erweiterte mathematische Faehigkeiten                                  %%
\makeatletter%                                                                      %%
\@ifpackageloaded{nccmath}{}{%                                                      %%
    \RequirePackage{nccmath}%                                                       %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% mathrsfs = Extended mathematics capabilities                                     %%
\makeatletter%                                                                      %%
\@ifpackageloaded{mathrsfs}{}{%                                                     %%
    \RequirePackage{mathrsfs}%                                                      %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% physics = Erweiterung um physikalische/mathematische Inhalte                     %%
\makeatletter%                                                                      %%
\@ifpackageloaded{physics}{}{%                                                      %%
    \RequirePackage{physics}%                                                       %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% I just don't like this :) :, so I changed it back to the standard                %%
\makeatletter%                                                                      %%
\@ifpackageloaded{physics}{%                                                        %%
    \renewcommand\Re[1]{%                                                           %%
        \real{#1}%                                                                  %%
    }%                                                                              %%
    \renewcommand\Im[1]{%                                                           %%
        \imaginary{#1}%                                                             %%
    }%                                                                              %%
}{}%                                                                                %%
\makeatother%                                                                       %%





%% babel [english,naustrian] = multilingual support for Plain TeX or LaTeX          %%
%%       [..., first language]                                                      %%
\makeatletter%                                                                      %%
\@ifpackageloaded{babel}{}{%                                                        %%
    \RequirePackage[english,main=naustrian]{babel}%                                 %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% after babel !: inputenc                                                          %%
\PassOptionsToPackage{%                                                             %%
utf8%                                                                               %%
}{inputenc}%                                                                        %%
\makeatletter%                                                                      %%
\@ifpackageloaded{inputenc}{}{%                                                     %%
    \RequirePackage{inputenc}%                                                      %%
}%                                                                                  %%
\makeatother%                                                                       %%





%% =================== Koma-Script-Packages/Layout-Guidelines ===================== %%
%% geometry [scale=0.72] = Flexible and complete interface to document dimensions   %%
%\RequirePackage[scale=0.72]{geometry}%                                             %%
%% scrpage2 [automark, ilines, komastyle] = Control of page headers and footers     %%
%% ! older version of scrlayer-scrpage                                              %%
%\RequirePackage[automark,ilines,komastyle]{scrpage2}%                              %%
%% scrlayer-scrpage = Define and manage page styles                                 %%
\RequirePackage[automark,ilines,pagestyleset=KOMA-Script]{scrlayer-scrpage}%        %%
\RequirePackage{scrdate}%                                                           %%
\RequirePackage{scrtime}%                                                           %%
%% tocloft = Control table of contents, figures, etc                                %%
\makeatletter%                                                                      %%
\@ifpackageloaded{subfig}{%                                                         %%
    \RequirePackage[subfigure,titles]{tocloft}%                                     %%
}{%                                                                                 %%
    \@ifpackageloaded{subfigure}{%                                                  %%
        \RequirePackage[subfigure,titles]{tocloft}%                                 %%
    }{%                                                                             %%
        \RequirePackage[titles]{tocloft}%                                           %%
    }%                                                                              %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% tocbasic = Management of tables/lists of contents (and the like)                 %%
\RequirePackage{tocbasic}%                                                          %%
%% tocstyle =  Define style of Table of contents (etc) files                        %%
%% [toctextentriesindented] ... all entries to the TOC have an indent               %%
%% if you don't want an indent you only can use \addtocontents                      %%
%% (KOMA-Script (Alpha-Version :/ (state: 17.02.2016)))                             %%
%%\RequirePackage{tocstyle}%                                                        %%




%% after KomaScript !: fontenc                                                      %%
\PassOptionsToPackage{%                                                             %%
T1%                                                                                 %%
}{fontenc}%                                                                         %%
\makeatletter%                                                                      %%
\@ifpackageloaded{fontenc}{}{%                                                      %%
    \RequirePackage{fontenc}%                                                       %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% ================== Definition, etc. of the used font's ========================= %%
%% --------------------------- Latin Modern font family --------------------------- %%
%% lmodern = Latin Modern fotns                                                     %%
\makeatletter%                                                                      %%
\@ifpackageloaded{lmodern}{}{%                                                      %%
    \RequirePackage{lmodern}%                                                       %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% LM Roman                                                                         %%
\renewcommand{\rmdefault}{lmr}%                                                     %%
%% LM Mono                                                                          %%
\renewcommand{\ttdefault}{lmtt}%                                                    %%
%% LM Sans                                                                          %%
%\renewcommand{\sfdefault}{lmss}%                                                   %%
%% ------------------------------ Bera font family ------------------------------   %%
%% bera = Bera fonts                                                                %%
%\RequirePackage{bera}%                                                             %%
%% Bera Serif                                                                       %%
%\RequirePackage{beraserif}% {fve}                                                  %%
%% Bera Mono                                                                        %%
%\RequirePackage{beramono}% {fvm}                                                   %%
%% Bera Sans                                                                        %%
%\RequirePackage{berasans}% {fvs}                                                   %%
%% ----------------------------- CmBright font family ----------------------------- %%
%% cmbright = Computer Modern Bright fonts                                          %%
%\RequirePackage{cmbright}%                                                         %%
%% CmBright Mono                                                                    %%
%\renewcommand{\ttdefault}{cmtl}%                                                   %%
%% CmBright Sans                                                                    %%
%\renewcommand{\sfdefault}{cmbr}%                                                   %%
%% ----------------------------- Further font families ---------------------------- %%
%% helvet [scaled] = Load Helvetica, scaled                                         %%
\RequirePackage[scaled]{helvet}%                                                    %%
\renewcommand{\sfdefault}{phv}%                                                     %%
%\RequirePackage{courier}%                                                          %%
%\renewcommand{\ttdefault}{pcr}%                                                    %%
%\RequirePackage{mathptmx}%                                                         %%
%\renewcommand{\rmdefault}{ptm}%                                                    %%
%\RequirePackage{mathpazo}%                                                         %%
%\renewcommand{\rmdefault}{pplx}% or {pplj}                                         %%
%\RequirePackage{charter}%                                                          %%
%\renewcommand{\sfdefault}{bch}%                                                    %%
%\RequirePackage{bookman}%                                                          %%
%\renewcommand{\sfdefault}{pbk}%                                                    %%
%% further fonts:   newcent {pnc}, avantgar {pag}, chancery {pzc},                  %%
%%                  uarial {ua1}, ulgothic {ulg}, luximono {ul9}, fourier {futm}, ..%%
%% ------------------------- Default fonts of the document ------------------------ %%
\renewcommand{\familydefault}{\rmdefault}%                                          %%
%% ---------------------------- Sans font in math mode ---------------------------- %%
%\RequirePackage{sansmath}%                                                         %%
%\sansmath%                                                                         %%





%% after KomaScript !: biblatex (WHATS WITH glossaries-package??????)
%% numbered:
%%  \RequirePackage[backend=biber, style=numbered-comp, citestyle=numbered-comp,% 
%%      sorting=nty, natbib=true]{biblatex}%
%% authoryear:
\RequirePackage[%
backend=biber,% 			default backend of biblatex (bibtex, bibtex8)
%% style=authoryear,%			.bbx- and .cbx-file 
citestyle=numeric,%		.cbx-file numeric style in the "Text", when using \cite ...
bibstyle=numeric,%	.bbx-file numeric style in the bibliography 
sorting=none,%              citation order ([nty ... sort by name, title, year], ... or declare a sorting scheme with \DeclareSortingScheme)
natbib=true,%               aliases for citation commands, like the natbib package
backref=true,%              reference back from the bibliography
backrefstyle=two,%          (e. g. two, three)
language=auto,%             language for the whole bibliograpies, will be set by the otherlanguage-environment:
autolang=other,%                if you want to change the language
alldates=year,%             basicly only the year
dateabbrev=false,%          disable abbreviations 
url=true,%                  urls true
doi=true,%                  doi true
urldate=long,
%% refsection=chapter
%% datamodel=dbmauthoryear%    .dbx-file (additional definitions)
]{biblatex}% biber --validate-control --convert-control %



%% after biblatex !: csquotes
%% naustrian alias for: austrian                                                    %%
%% english: english                                                                 %%
\makeatletter%                                                                      %%
\@ifpackageloaded{csquotes}{%                                                       %%
     \PassOptionsToPackage{autostyle=true,austrian=quotes,english=american}{csquotes}%
}{%                                                                                 %%
    \RequirePackage[autostyle=true,austrian=quotes,english=american]{csquotes}%     %%
}%                                                                                  %%
\makeatother%                                                                       %%

 
%% array = extending the array and tabular environments                             %%
%% needed by authors (siunitx)                                                      %%
\makeatletter%                                                                      %%
\@ifpackageloaded{array}{}{%                                                        %%
    \RequirePackage{array}%                                                         %%
}%                                                                                  %%
\makeatother%                                                                       %%
\makeatletter%                                                                      %%
\@ifpackageloaded{siunitx}{}{%                                                      %%
    \RequirePackage{siunitx}%                                                       %%
}%                                                                                  %%
\makeatother%                                                                       %%






%% setspace = set space between lines                                               %%
\makeatletter%                                                                      %%
\@ifpackageloaded{setspace}{}{%                                                     %%
    \RequirePackage{setspace}%                                                      %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% lscape = place selected parts of a document in landscape                         %%
\makeatletter%                                                                      %%
\@ifpackageloaded{lscape}{}{%                                                       %%
    \RequirePackage{lscape}%                                                        %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% pdflscape = make landscape pages display as landscape                            %%
\makeatletter%                                                                      %%
\@ifpackageloaded{pdflscape}{}{%                                                    %%
    \RequirePackage{pdflscape}%                                                     %%
}%                                                                                  %%
\makeatother%                                                                       %%




\makeatletter%
\@ifpackageloaded{tabularx}{}{%
    \RequirePackage{tabularx}%
}%
\makeatother%
\makeatletter%
\@ifpackageloaded{booktabs}{}{%
    \RequirePackage{booktabs}%
}%
\makeatother%
\makeatletter%
\@ifpackageloaded{longtable}{}{%
    \RequirePackage{longtable}%
}%
\makeatother%

%% needs booktabs 
%% ========================== Load the colors-package ============================= %%
\RequirePackage{packages/tumcolors}%                                                %%







%% position: UNKOWN
%% graphicx = Enhanced support for graphics                                         %%
\makeatletter%                                                                      %%
\@ifpackageloaded{graphicx}{}{%                                                     %%
    \RequirePackage{graphicx}%                                                      %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% subfig [lofdepth] = Figures broken into subfigures (not recommended)             %%
%\RequirePackage[lofdepth,labelformat=simple,listofformat=subsimple,%               %%
%   subrefformat=subsimple,labelsep=period]{subfig}%                                %%
%% subfloat [countmax] = Sub-numbering for figures and tables (not recommended)     %%
%\RequirePackage[countmax]{subfloat}%                                               %%
%% caption [hypcap=true] = Customising captions in floating environments            %%
\PassOptionsToPackage{%                                                             %%
hypcap=true%                                                                        %%
}{caption}%                                                                         %%
\makeatletter%                                                                      %%
\@ifpackageloaded{caption}{}{%                                                      %%
    \RequirePackage{caption}%                                                       %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% subcaption [list=on,hypcap=true] = Support for sub-captions                      %%
\PassOptionsToPackage{%                                                             %%
list=on,hypcap=true%                                                                %%
}{caption}%                                                                         %%
\makeatletter%                                                                      %%
\@ifpackageloaded{subcaption}{}{%                                                   %%
    \RequirePackage{subcaption}%                                                    %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% pdfpages = Include PDF documents in LaTeX                                        %%
%% requires: eso-pic, atbegshi, pdflscape, graphicx, ifthen, calc                   %%
\makeatletter%                                                                      %%
\@ifpackageloaded{pdfpages}{}{%                                                     %%
    \RequirePackage{pdfpages}%                                                      %%
}%                                                                                  %%
\makeatother%                                                                       %%


















%% enumitem = stellt die Umgebungen enumerate, itemize and description zur          %%
%% Verfuegung                                                                       %%
\makeatletter%                                                                      %%
\@ifpackageloaded{enumitem}{}{%                                                     %%
    \RequirePackage{enumitem}%                                                      %%
}%                                                                                  %%
%% easylist [ampersand] = fuer flexible Listen/Aufzaehlungen (extrem praktisch)     %%
\PassOptionsToPackage{%                                                             %%
ampersand%                                                                          %%
}{easylist}%                                                                        %%
\makeatletter%                                                                      %%
\@ifpackageloaded{easylist}{}{%                                                     %%
    \RequirePackage{easylist}%                                                      %%
}%                                                                                  %%
\makeatother%                                                                       %%






%% before: scrhack
%% ===================================== TikZ ===================================== %%
%% tikz,pgf = Create PostScript and PDF graphics in TeX                             %%
%% Most important commands:                                                         %%
%% \node (name) [object] at (coordinate) {caption};                                 %%
%% \coordinate (name) at (coordinate);                                              %%
%% \draw (coordinate) -- (coordinate) to [element] (coordinate);                    %%
\makeatletter%                                                                      %%
\@ifpackageloaded{tikz}{%                                                           %%
}{%                                                                                 %%
    \RequirePackage{tikz}%                                                          %%
}%                                                                                  %%
\makeatother%                                                                       %%
\makeatletter%                                                                      %%
\@ifpackageloaded{pgf}{%                                                            %%
}{%                                                                                 %%
    \RequirePackage{pgf}%                                                           %%
}%                                                                                  %%
\makeatother%                                                                       %%
\makeatletter%                                                                      %%
\@ifpackageloaded{pgf}{%                                                            %%
    \@ifpackageloaded{pgfplots}{}{%                                                 %%
        \RequirePackage{pgfplots}%                                                  %%
        \@ifpackageloaded{pgfplotstable}{}{%                                        %%
            \RequirePackage{pgfplotstable}%                                         %%
        }%                                                                          %%
    }%                                                                              %%
}{}%                                                                                %%
\makeatother%                                                                       %%



%% datetime (for e. g. \monthname + scrdate + scrtime)                              %%
\RequirePackage{datetime}%                                                          %%
%% IMPORTANT: scrhack must be loaded after datetime (and dbmTikz and the fonts and listings)  %%
\RequirePackage{scrhack}%                                                           %%
%% float =  Improved interface for floating objects                                 %%
\makeatletter%                                                                      %%
\@ifpackageloaded{float}{%                                                          %%
}{%                                                                                 %%
    \RequirePackage{float}%                                                         %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% after nearly all packages !: hyperref                                            %%
\makeatletter%																  		%%
\newcommand{\pdfauthor}[1]{\gdef\@pdfauthor{#1}}%									%%
\newcommand{\@pdfauthor}{\@latex@warning@no@line{No \noexpand\pdfauthor given}}%	%%
\newcommand{\pdftitle}[1]{\gdef\@pdftitle{#1}}%										%%
\newcommand{\@pdftitle}{\@latex@warning@no@line{No \noexpand\pdftitle given}}%		%%
\newcommand{\pdfsubject}[1]{\gdef\@pdfsubject{#1}}%									%%
\newcommand{\@pdfsubject}{\@latex@warning@no@line{No \noexpand\pdfsubject given}}%	%%
\newcommand{\pdfkeywords}[1]{\gdef\@pdfkeywords{#1}}%                               %%
\newcommand{\@pdfkeywords}{\@latex@warning@no@line{No \noexpand\pdfkeywords given}}%%%
\makeatother%																		%%
%% hyperref [...] = for hyperlinks											  		%%
\makeatletter%                                                                      %%
\@ifpackageloaded{url}{%                                                            %%
     \PassOptionsToPackage{hyphens}{url}%                                           %%
}{%                                                                                 %%
    \RequirePackage[hyphens]{url}%                                                  %%
}%                                                                                  %%
\makeatother%                                                                       %%
\makeatletter%                                                                      %%
\@ifpackageloaded{hyperref}{%                                                       %%
}{%                                                                                 %%
    \RequirePackage[%                                                               %%
bookmarks=true,%        %% enable bookmarks                                         %%
bookmarksopen=true,%    %% display the bookmarks when opening the documnet          %%
bookmarksnumbered=true,%%% number the bookmarks                                     %%
hyperfootnotes=false,%  %% = false, to ensure that KOMAoptions{footnotes=multiple}  %%
    ]{hyperref}%                                                                    %%
}%                                                                                  %%
\hypersetup{%                                                                       %%
colorlinks=true,%       %% colored links                                            %%
linkbordercolor={0 1 1},%% frame color                                              %%
linkcolor=\TUMcolor{2},%%% link color                                               %%
urlcolor=\TUMcolor{4},% %% url color                                                %%
menucolor=\TUMcolor{13},%% menu color                                               %%
citecolor=\TUMcolor{10},%% cite color                                               %%
breaklinks=true,%       %% enable breaking links in listof...                       %%
linktocpage=true,%      %% only page numbers in the toc are hyperlinks              %%
hypertexnames=true,%    %% because of biblatex-backref                              %%
plainpages=false%       %% biblatex                                                 %%
%%                      %% is possible                                              %%
}%                                                                                  %%
\makeatother%                                                                       %%
\makeatletter%                                                                      %%
\if@twoside%                                                                        %%
    \hypersetup{pdfpagelayout=TwoPageRight}%                                        %%
\else%                                                                              %%
    \hypersetup{pdfpagelayout=OneColumn}%                                           %%
\fi%                                                                                %%
\makeatother%                                                                       %%
%% hypcap =                                                                         %%
%% must be loaded after hyperref (damit das Bild beim Klick (ref) auch erscheint)   %%
\makeatletter%                                                                      %%
\@ifpackageloaded{hypcap}{%                                                         %%
     \PassOptionsToPackage{all}{hypcap}%                                            %%
}{%                                                                                 %%
    \RequirePackage[all]{hypcap}%                                                   %%
}%                                                                                  %%
\makeatletter%                                                                      %%
\AtBeginDocument{%                                                                  %%
    \hypersetup{%                                                                   %%
        pdftitle={\@pdftitle},%                                                     %%
        pdfsubject={\@pdfsubject},%                                                 %%
        pdfauthor={\@pdfauthor},%                                                   %%
        pdfkeywords={\@pdfkeywords}%                                                %%
        % pdfcreator, pdfproducer                                                   %%
    }%                                                                              %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% ever break the urls 																%%
\expandafter\def\expandafter\UrlBreaks\expandafter{\UrlBreaks%				  		%%
  	\do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j%						  		%%
  	\do\k\do\l\do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t%						  		%%
  	\do\u\do\v\do\w\do\x\do\y\do\z\do\A\do\B\do\C\do\D%						  		%%
  	\do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L\do\M\do\N%						  		%%
  	\do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X%						  		%%
  	\do\Y\do\Z\do\_\do\-\do\+\do\-\do\/\do\.\do\1\do\2%						  		%%
  	\do\3\do\4\do\5\do\6\do\7\do\8\do\9\do\0\do\,}% 						  		%%
\Urlmuskip = 0mu plus 1mu% 													  		%%
\makeatletter%																		%%
\AtBeginDocument{%                                                                  %%
    \@ifpackageloaded{babel}{% begin: babel loaded									%%
    	\newcommand*{\tabrefname}{}%												%%
    	\newcommand*{\figrefname}{}%												%%
    	\newcommand*{\partrefname}{}%												%%
    	\newcommand*{\chaprefname}{}%												%%
    	\newcommand*{\secrefname}{}%												%%
    	\newcommand*{\subsecrefname}{}%												%%
    	\newcommand*{\subsubsecrefname}{}%											%%
    	\newcommand*{\parrefname}{}%												%%
        \newcommand*{\subparrefname}{}%                                             %%
        \newcommand*{\subfigrefname}{}%                                             %%
        \newcommand*{\subtabrefname}{}%                                             %%
        \newcommand*{\lstlistingautorefname}{}%                                     %%
        \newcommand*{\lstlistingrefname}{}%											%%
        \AfterEndPreamble{%															%%
        	\addto\extrasenglish{%                                                  %%
            	\renewcommand*{\tabrefname}{table}%                                 %%
            	\renewcommand*{\figrefname}{figure}%                                %%
            	\renewcommand*{\partrefname}{part}%                                 %%
            	\renewcommand*{\chaprefname}{chapter}%                              %%
            	\renewcommand*{\secrefname}{section}%                               %%
            	\renewcommand*{\subsecrefname}{subsection}%                         %%
            	\renewcommand*{\subsubsecrefname}{subsubsection}%                   %%
            	\renewcommand*{\parrefname}{paragraph}%                             %%
            	\renewcommand*{\subparrefname}{subparagraph}%                       %%
            }%																		%%
        	\addto\extrasnaustrian{%                                                %%
            	\renewcommand*{\tabrefname}{Tabelle}%                               %%
            	\renewcommand*{\figrefname}{Abbildung}%                             %%
            	\renewcommand*{\partrefname}{Teil}%                                 %%
            	\renewcommand*{\chaprefname}{Kapitel}%                              %%
            	\renewcommand*{\secrefname}{Abschnitt}%                             %%
            	\renewcommand*{\subsecrefname}{Unterabschnitt}%                     %%
            	\renewcommand*{\subsubsecrefname}{Unterunterabscnhitt}%             %%
            	\renewcommand*{\parrefname}{Paragraph}%                             %%
                \renewcommand*{\subparrefname}{Unterparagraph}%                     %%
             }%																		%%
        }%                                                                          %%
		\@ifpackageloaded{listings}{% begin: listings loaded						%%
        	\AfterEndPreamble{%														%%
           		\addto\extrasenglish{%                                             	%%
            		\renewcommand*{\lstlistingrefname}{listing}%      				%%
            	}%																	%%
        		\addto\extrasnaustrian{%                                            %%
            		\renewcommand*{\lstlistingrefname}{Listing}%                    %%
            	}%																	%%
            }%																		%%
      	}{}% end: listings 															%%
        \@ifpackageloaded{subcaption}{% begin: subcaption loaded					%%
        	\AfterEndPreamble{%														%%
           		\addto\extrasenglish{%                                             	%%
            		\renewcommand*{\subfigrefname}{figure}%      					%%
            		\renewcommand*{\subtabrefname}{table}%        					%%
            	}%																	%%
        		\addto\extrasnaustrian{%                                            %%
            		\renewcommand*{\subfigrefname}{Abbildung}%                      %%
            		\renewcommand*{\subtabrefname}{Tabelle}%                        %%
            	}%																	%%
            }%																		%%
      	}{}% end: subcaption 														%%
      	\@ifpackageloaded{hyperref}{% begin: hyperref loaded						%%
        	\AfterEndPreamble{%														%%
        		\addto\extrasenglish{%                                              %%
        	    	\renewcommand*{\tableautorefname}{table}%                       %%
        	    	\renewcommand*{\figureautorefname}{figure}%                     %%
        	    	\renewcommand*{\partautorefname}{part}%                         %%
        	    	\renewcommand*{\chapterautorefname}{chapter}%                   %%
        	    	\renewcommand*{\sectionautorefname}{section}%                   %%
        	    	\renewcommand*{\subsectionautorefname}{subsection}%             %%
        	    	\renewcommand*{\subsubsectionautorefname}{subsubsection}%       %%
        	    	\renewcommand*{\paragraphautorefname}{paragraph}%               %%
                    \renewcommand*{\subparagraphautorefname}{subparagraph}%         %%
                    \renewcommand*{\equationautorefname}{equation}%                 %%
                    \renewcommand*{\appendixautorefname}{appendix}%                 %%
        	    }%																	%%
        		\addto\extrasnaustrian{%                                            %%
        	    	\renewcommand*{\tableautorefname}{Tabelle}%                     %%
        	    	\renewcommand*{\figureautorefname}{Abbildung}%                  %%
        	    	\renewcommand*{\partautorefname}{Teil}%                         %%
        	    	\renewcommand*{\chapterautorefname}{Kapitel}%                   %%
        	    	\renewcommand*{\sectionautorefname}{Abschnitt}%                 %%
        	    	\renewcommand*{\subsectionautorefname}{Unterabschnitt}%         %%
        	    	\renewcommand*{\subsubsectionautorefname}{Unterunterabscnhitt}% %%
        	    	\renewcommand*{\paragraphautorefname}{Paragraph}%               %%
                    \renewcommand*{\subparagraphautorefname}{Unterparagraph}%       %%
                    \renewcommand*{\equationautorefname}{Gleichung}%                %%
                    \renewcommand*{\appendixautorefname}{Anhang}%                   %%
        	     }%																	%%
        	}%                                                                      %%
			\@ifpackageloaded{listings}{% begin: listings loaded					%%
        		\AfterEndPreamble{%													%%
        	   		\addto\extrasenglish{%                                          %%
        	    		\renewcommand*{\lstlistingrefname}{listing}%      			%%
        	    	}%																%%
        			\addto\extrasnaustrian{%                                        %%
        	    		\renewcommand*{\lstlistingrefname}{Listing}%                %%
        	    	}%																%%
        	    }%																	%%
      		}{}% end: listings 														%%
        	\@ifpackageloaded{subcaption}{% begin: subcaption loaded				%%
        		\AfterEndPreamble{%													%%
        	   		\addto\extrasenglish{%                                          %%
        	    		\renewcommand*{\subfigureautorefname}{figure}%      		%%
        	    		\renewcommand*{\subtableautorefname}{table}%        		%%
        	    	}%																%%
        			\addto\extrasnaustrian{%                                        %%
        	    		\renewcommand*{\subfigureautorefname}{Abbildung}%           %%
        	    		\renewcommand*{\subtableautorefname}{Tabelle}%              %%
        	    	}%																%%
        	    }%																	%%
      		}{}% end: subcaption 													%%
        	\newcommand*{\figref}[1]{%												%%
          		\hyperref[{#1}]{\figureautorefname~\ref{#1}}%						%%
        	}%																		%%
            \newcommand*{\subfigref}[1]{%                                           %%
                \hyperref[{#1}]{\subfigureautorefname~\ref{#1}}%                    %%
            }%                                                                      %%
        	\newcommand*{\tabref}[1]{%												%%
          		\hyperref[{#1}]{\tableautorefname~\ref{#1}}%						%%
        	}%																		%%
            \newcommand*{\subtabref}[1]{%                                           %%
                \hyperref[{#1}]{\subtableautorefname~\ref{#1}}%                     %%
            }%                                                                      %%
        	\newcommand*{\subparref}[1]{%											%%
          		\hyperref[{#1}]{\subparagraphautorefname~\ref{#1}}%					%%	
        	}%																		%%
        	\newcommand*{\parref}[1]{%												%%
          		\hyperref[{#1}]{\paragraphautorefname~\ref{#1}}%					%%
        	}%																		%%
        	\newcommand*{\subsubsecref}[1]{%										%%
          		\hyperref[{#1}]{\subsubsectionautorefname~\ref{#1}}%				%%		
        	}%																		%%
        	\newcommand*{\subsecref}[1]{%											%%
          		\hyperref[{#1}]{\subsectionautorefname~\ref{#1}}%			    	%%	
        	}%																		%%
        	\newcommand*{\secref}[1]{%												%%
          		\hyperref[{#1}]{\sectionautorefname~\ref{#1}}%		    			%%
        	}%																		%%
        	\newcommand*{\chapref}[1]{%												%%
          		\hyperref[{#1}]{\chapterautorefname~\ref{#1}}%						%%
        	}%																		%%
        	\newcommand*{\partref}[1]{%												%%
          		\hyperref[{#1}]{\partautorefname~\ref{#1}}%							%%
        	}% 																		%%
        	\newcommand*{\lstlistref}[1]{%											%%
          		\hyperref[{#1}]{\lstlistingautorefname~\ref{#1}}%					%%
        	}% end: hyperref loaded													%%
      	}{% begin: hyperref not loaded												%%
        	\newcommand*{\figref}[1]{%												%%
          		\figrefname~\ref{#1}%												%%
        	}%																		%%
            \newcommand*{\subfigref}[1]{%                                           %%
                \subfigrefname~\ref{#1}%                                            %%
            }%                                                                      %%
        	\newcommand*{\tabref}[1]{%												%%
          		\tabrefame~\ref{#1}%												%%
        	}%																		%%
            \newcommand*{\subtabref}[1]{%                                           %%
                \subtabrefname~\ref{#1}%                                            %%
            }%                                                                      %%
        	\newcommand*{\subparref}[1]{%											%%
          		\subparrefname~\ref{#1}%											%%
        	}%																		%%
        	\newcommand*{\parref}[1]{%												%%
          		\parrefname~\ref{#1}%												%%
        	}%																		%%
        	\newcommand*{\subsubsecref}[1]{%										%%
          		\subsubsecrefname~\ref{#1}%											%%
        	}%																		%%				
        	\newcommand*{\subsecref}[1]{%											%%
          		\subsecrefname~\ref{#1}%											%%
        	}%																		%%				
        	\newcommand*{\secref}[1]{%												%%
          		\secrefname~\ref{#1}%												%%									
        	}%																		%%				
        	\newcommand*{\chapref}[1]{%												%%
          		\chaprefname~\ref{#1}%												%%									
        	}%																		%%				
        	\newcommand*{\partref}[1]{%												%%
          		\partrefname~\ref{#1}%												%%	
        	}%																		%%			
        	\newcommand*{\lstlistref}[1]{%											%%
          		\lstlistrefname~\ref{#1}%											%%	
        	}%																		%%
      	}% end: hyperref not loaded													%%				
    }{}% end: babel not loaded														%%
}%  end AtBeginDocument                                                             %%
\makeatother%																		%%







%% not loaded:  marginnote, perpage, hyphenat, extdash, microtype, cmap, textcomp,
%%              parskip, alltt, setspace, moreverb, verbatim, beramono, ulem, 
%%              bold-extra, blindtext, scrextend, tasks, eurosym, marvosym,
%%              gensymb, mathtext, numprint, luatexja, luatexja-fontspec, luatextra
%%              rotating, dcolumn, multirow, tabu, tabulary, showframes
%%              layout, fullpage, titlesec, 



%% ========================== Macros / Definitions / etc. ========================= %%
%% ================================================================================ %%
%% ============================== line/rule-width's ******************************* %%
%% ******************************************************************************** %%
%% set the width of the rules                                                       %%
\newlength{\rulewidth}%                                                             %%
\setlength{\rulewidth}{0.4pt}%                                                      %%
%% definition of \baselinestretch (1.06 also looks good) (Zeilenhhe anpassen)      %%
\def\baselinestretch{1.00}%                                                         %%
%% set the length of \parskip (Abstand nach einem Umbruch mit der Enter-Taste)      %%
%% \setlength\parskip{2pt}%                                                         %%
%% set the parindentd to 0 (Einrckung nach einem Umbruch)                          %%
\setlength{\parindent}{0pt}%                                                        %%
\makeatletter%                                                                      %%
\@ifpackageloaded{tikz}{%                                                           %%
    \tikzset{w1/.style={line width=0.1mm}}                                          %%
    \tikzset{w2/.style={line width=0.14mm}}                                         %%
    \tikzset{w3/.style={line width=0.28mm}}                                         %%
    \tikzset{w4/.style={line width=0.56mm}}                                         %%
    \tikzset{w5/.style={line width=1.12mm}}                                         %%
    \tikzset{w6/.style={line width=2.24mm}}                                         %%
    \tikzset{w7/.style={line width=4.48mm}}                                         %%
}{}%																				%%
\makeatother%																		%%
%% ================================================================================ %%
%% ============================ tikz and pgf-plot's ******************************* %%
%% ******************************************************************************** %%
\makeatletter%																		%%
\@ifpackageloaded{pgf}{%                                                            %%
    \pgfplotsset{compat=newest,%                                                    %%
        x tick label style={/pgf/number format/set decimal separator},%             %%
        x tick label style={/pgf/number format/1000 sep={\;\!}},%                   %%
        y tick label style={/pgf/number format/set decimal separator},%             %%
        y tick label style={/pgf/number format/1000 sep={\;\!}},%                   %%
        %% wissenschaftliche Arbeiten mit geschlossenen Diagrammen und genauer 		%%
        %% Bildunterschrift (z. B. 4 Zeilen)										%%
        TUM style 1/.append style={%												%%
            tick style={%															%%
                black, w1%															%%
            },%																		%%
            tick align={%															%%
                outside%															%%
            },%																		%%
            major grid style={solid, black, w2},%									%%
            minor grid style={dotted, black, w1},%									%%
            inner axis line style={solid, black, w2},%								%%
            axis line style={-stealth},%											%%
            hide obscured x ticks=false, hide obscured y ticks=false%				%%
        },%																			%%
    }%                                                                              %%
}{}%                                                                                %%
\makeatother%                                                                       %%








%% Style-commands                                                                   %%
\ExplSyntaxOn%                                                                      %%
\clist_new:N \l_TUM_style_clist%                                                    %%
\clist_clear:N \l_TUM_style_clist%                                                  %%
\clist_put_right:Nn \l_TUM_style_clist {\bfseries\color{\TUMcolor{2}}}%             %%
\DeclareExpandableDocumentCommand{\TUMstyle}{m+m}%                                  %%
{{%                                                                                 %%
    \clist_item:Nn {\l_TUM_style_clist}{#1}{#2}%                                    %%
}}%                                                                                 %%
\ExplSyntaxOff%                                                                     %%


%% hyphenation                                                                      %%
\hyphenation{normalem uwforbf ulforem}%                                             %%
%% set the length of the headsep                                                    %%
\setlength{\headsep}{10mm}%                                                         %%
%%  maximum amount of subsections                                                   %%
%% ! In scrbook only use part, chapter, section and subsection, NOT MORE !          %%
%% secnumdepth turns on/out the numbering                                           %%
%% tocdepth turns on/out, if it should be in the TOC                                %%
%% tocdepth will change in \dbmtableofcontents and \dbmlocaltableofcontents !       %%
\setcounter{tocdepth}{5}%                                                           %%
\setcounter{secnumdepth}{5}%                                                        %%
%% set the pnumwidth and tocrmarg                                                   %%
\makeatletter%                                                                      %%
\renewcommand{\@pnumwidth}{2em}%                                                    %%
\renewcommand{\@tocrmarg}{3em}%                                                     %%
\makeatother%                                                                       %%
%% --------------------------- Footnotes with Koma-Script ------------------------- %%
%% Multiple-footnotes enabled                                                       %%
\KOMAoptions{footnotes=multiple}%                                                   %%
\renewcommand*{\multfootsep}{,\nobreakspace}% %% \nobreakspace !                    %%
%% \blfootnote is a footnote without a number and the counter doesn't               %%
%% increment                                                                        %%
\makeatletter%                                                                      %%
\def\blfootnote{\xdef\@thefnmark{}\@footnotetext}%                                  %%
\makeatother%                                                                       %%
%% \setfootnoterule[Hhe]{Lnge} %% falls die Lnge des Strichs verndert           %%
%% werden soll                                                                      %%
%% Hinweis: Mehrere Fussnoten zur gleichen Referenz werden mit \footref erzeugt     %%











%% ================================================================================ %%
%% ================================== siunits ************************************* %%
%% ******************************************************************************** %%
\sisetup{group-minimum-digits=4, exponent-product=\cdot, output-product=\cdot,%     %%
separate-uncertainty = true,per-mode = symbol}%                                     %%
%% ================================================================================ %%
%% ============================== babel & csquotes ******************************** %%
%% ******************************************************************************** %%
\makeatletter%                                                                      %%
\@ifpackageloaded{csquotes}{%                                                       %%
    \newcommand{\quoteb}{\openautoquote}%                                           %%
    \newcommand{\quotee}{\closeautoquote}%                                          %%
}{}%                                                                                %%
\@ifpackageloaded{babel}{%                                                          %%
    %% with shorthands, we have to do following for each, not main language         %%
    \useshorthands*{"}%                                                             %%
}{}%                                                                                %%
\AtBeginDocument{%                                                                  %%
    \@ifpackageloaded{babel}{%                                                      %%
        \addto\extrasenglish{%                                                      %%
            \languageshorthands{english}%                                           %%
        }%                                                                          %%
    }{}%                                                                            %%
}%                                                                                  %%
\@ifpackageloaded{babel}{%                                                          %%
    \defineshorthand[english]{"`}{\openautoquote}%                                  %%
    \defineshorthand[english]{"'}{\closeautoquote}%                                 %%
}{}%                                                                                %%
\makeatother%                                                                       %%
%% ================================================================================ %%
%% ============================== graphicx & float ******************************** %%
%% ******************************************************************************** %%
\makeatletter%                                                                      %%
\@ifpackageloaded{graphicx}{%                                                       %%
    %% graphicspath{{path1}{path2}...{pathn}} adds the paths to \includegraphic[]{} %%
    \graphicspath{{images/titlepage/}{images/help/}{images/}}%                      %%
}{}%                                                                                %%
\makeatother%                                                                       %%
%% standard floatplacement's                                                        %% 
\makeatletter%                                                                      %%
\@ifpackageloaded{float}{%                                                          %%
    \floatplacement{figure}{H}%                                                     %%
    \floatplacement{table}{H}%                                                      %%
}{}%                                                                                %%
\makeatother%                                                                       %%
%% ================================================================================ %%
%% ======================== subfig, caption & subcaption ************************** %%
%% ******************************************************************************** %%
%% set the style of the captionlabel/caption                                        %%
\setkomafont{captionlabel}{\normalsize\bfseries}%                                   %%
\setkomafont{caption}{\normalsize}%                                                 %%
\KOMAoptions{captions=tablesignature}%                                              %%
\KOMAoptions{captions=figureheading}%                                               %%
\makeatletter%                                                                      %%
\@ifpackageloaded{subfig}{%                                                         %%
    \renewcommand\p@subfigure{\thefigure.}%                                         %%
    \renewcommand\p@subtable{\thetable.}%                                           %%
}{}%                                                                                %%
\@ifpackageloaded{caption}{%                                                        %%
    \@ifpackageloaded{hyperref}{%                                                   %%
        \captionsetup{hypcap=true}%                                                 %%
    }{}%                                                                            %%
    \captionsetup[table]{position=top}% KOMA-option is stronger                     %%
    \captionsetup[figure]{position=bottom}% KOMA-option is stronger                 %%
    \captionsetup[subtable]{labelformat=simple,labelsep=period,listformat=simple}%  %%
    \captionsetup[subfigure]{labelformat=simple,labelsep=period,listformat=simple}% %%
    \captionsetup{format=plain}%                                                    %%
}{}%                                                                                %%
\@ifpackageloaded{subcaption}{%                                                     %%
    \renewcommand\p@subfigure{\thefigure.}%                                         %%
    \renewcommand\p@subtable{\thetable.}%                                           %%
}{}%                                                                                %%
\makeatother%                                                                       %%
%% ================================================================================ %%
%% =================================== tables ************************************* %%
%% ******************************************************************************** %%
%% Neue Spaltenparameter :D (praktisch)                                             %%
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}}%                          %%
\newcolumntype{C}[1]{>{\centering\arraybackslash}p{#1}}%                            %%
\newcolumntype{R}[1]{>{\raggedleft\arraybackslash}p{#1}}%                           %%
\newcolumntype{M}[1]{>{\raggedright\arraybackslash}m{#1}}%                          %%
\newcolumntype{N}[1]{>{\centering\arraybackslash}m{#1}}%                            %%
\newcolumntype{O}[1]{>{\raggedleft\arraybackslash}m{#1}}%                           %%
\newcolumntype{Z}[3]{>{#3\arraybackslash}#1{#2}}%                                   %%
\makeatletter%																		%%
\@ifpackageloaded{tabularx}{%														%%
    \newcolumntype{A}{>{\centering\arraybackslash}X}%								%%
    \newcolumntype{B}{>{\raggedright\arraybackslash}X}%								%%
}{}%																				%%
\makeatother%																		%%
%% Damit einzelne Tabellenabschnitte links-, rechtsbuendig / zentriert werden:      %%
\newcommand{\ltab}{\raggedright\arraybackslash}%                                    %%
\newcommand{\ctab}{\centering\arraybackslash}%                                      %%
\newcommand{\rtab}{\raggedleft\arraybackslash}%                                     %%









%% ================================================================================ %%
%% ==================  Definition of the header- and footer-style ***************** %%
%% ******************************************************************************** %%
\makeatletter%                                                                      %%
\def\responsible#1{\gdef\@responsible{\protect{#1}}}%                               %%
\makeatother%                                                                       %%
\makeatletter%                                                                      %%
\def\chapterpagestyle{empty}%                                                       %%
\let\@responsible\relax%                                                            %%
\KOMAoptions{headsepline=\rulewidth:\textwidth}%                                    %%
\KOMAoptions{footsepline=\rulewidth:\textwidth}%                                    %%
\KOMAoptions{footsepline=false}%                                                    %%
\KOMAoptions{headsepline=false}%                                                    %%
\KOMAoptions{plainfootsepline=false}%                                               %%
\KOMAoptions{plainheadsepline=false}%                                               %%
\def\settumheadings%                                                                %%
{%                                                                                  %%
    \if@twoside%                                                                    %%
        \automark[section]{chapter}%                                                %%
    \else%                                                                          %%
        \automark{chapter}%                                                         %%
    \fi%                                                                            %%
    \lehead*[]{\color{\TUMcolor{2}}\pagemark}%                                      %%
    \cehead*[]{}%                                                                   %%
    \rehead*[]{\color{\TUMcolor{2}}\headmark}%                                      %%
    \lohead*[]{\color{\TUMcolor{2}}\headmark}%                                      %%
    \cohead*[]{}%                                                                   %%
    \rohead*[]{\color{\TUMcolor{2}}\pagemark}%                                      %%
    \lefoot*[]{}%                                                                   %%
    \cefoot*[]{}%                                                                   %%
    \refoot*[]{\color{\TUMcolor{2}}\@responsible}%                                  %%
    \lofoot*[]{\color{\TUMcolor{2}}\@responsible}%                                  %%
    \cofoot*[]{}%                                                                   %%
    \rofoot*[]{}%                                                                   %%
    \addtokomafont{headsepline}{\color{\TUMcolor{2}}}%                              %%
    \addtokomafont{footsepline}{\color{\TUMcolor{2}}}%                              %%
    \addtokomafont{pagenumber}{\color{\TUMcolor{2}}\normalfont\sffamily}%           %%
    \addtokomafont{pagehead}{\color{\TUMcolor{2}}\normalfont\sffamily}%             %%
    \addtokomafont{pagefoot}{\color{\TUMcolor{2}}\normalfont\sffamily}%             %%
    \KOMAoptions{footsepline=true}%                                                 %%
    \KOMAoptions{headsepline=true}%                                                 %%
    \KOMAoptions{plainfootsepline=false}%                                           %%
    \KOMAoptions{plainheadsepline=false}%                                           %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% ---------------------- Definition of the matters/pagestyle --------------------- %%
%% Ever matter starts on a right (an odd) (ungerade) side                           %%
%% A part starts on the right side and the following left is empty                  %%
%% A chapter starts on the right side (disabled below!)                             %%
%% A section starts at the place it is set                                          %%
%% A subsection starts at the place it is set                                       %%
\makeatletter%																		%%
%% define front-/main- and backmatter in scrreprt like scrbook 						%% 
\@ifclassloaded{scrreprt}{%															%%
\newif\if@mainmatter\@mainmattertrue%												%%
\newcommand*\frontmatter{%															%%
  	\if@twoside\cleardoubleoddpage\else\clearpage\fi%								%%
  	\@mainmatterfalse\pagenumbering{roman}%											%%
}%																					%%
\newcommand*\mainmatter{%															%%
  	\if@twoside\cleardoubleoddpage\else\clearpage\fi%								%%
  	\@mainmattertrue\pagenumbering{arabic}%											%%
}%																					%%
\newcommand*\backmatter{%															%%
  	\if@openright\cleardoubleoddpage\else\clearpage\fi\@mainmatterfalse%			%%
}%																					%%
}{}%																				%%
\makeatother%																		%%
%% now redefine the "matters" 														%%
\makeatletter%                                                                      %%
\def\nomatter{\@nomatter}%                                                          %%
\def\@nomatter%                                                                     %%
{%                                                                                  %%
    \@mainmatterfalse%                                                              %%
    \pagestyle{empty}%                                                              %%
    \pagenumbering{Roman}%                                                          %%
}%                                                                                  %%
\let\old@frontmatter\frontmatter%                                                   %%
\def\frontmatter{%                                                                  %%
    \old@frontmatter%                                                               %%
    \pagestyle{scrheadings}%                                                        %%
    \settumheadings%                                                                %%
}%                                                                                  %%
\let\old@mainmatter\mainmatter%                                                     %%
\def\mainmatter{%                                                                   %%
    \old@mainmatter%                                                                %%
    \pagestyle{scrheadings}%                                                        %%
    \settumheadings%                                                                %%
}%                                                                                  %%
\let\old@backmatter\backmatter%                                                     %%
\def\backmatter{%                                                                   %%
    \old@backmatter%                                                                %%
}%                                                                                  %%
\let\old@appendix\appendix%                                                         %%
\def\appendix{%                                                                     %%
    \newpage%                                                                       %%
    \if@twoside%                                                                    %%
        \cleardoubleoddpage%                                                        %%
        \clearscrheadfoot%                                                          %%
    \else%                                                                          %%
        \clearpage%                                                                 %%
    \fi%                                                                            %%
    \old@appendix%                                                                  %%
    \pagestyle{scrheadings}%                                                        %%
    \addto\captionsnaustrian{%                                                      %%
        \renewcommand{\appendixname}{%                                              %%
            Anhang}%                                                                %%
    }%                                                                              %%
    \addto\captionsenglish{%                                                        %%
        \renewcommand{\appendixname}{%                                              %%
            Appendix}%                                                              %%
    }%                                                                              %%
    \settumheadings%                                                                %%
    \phantomsection%                                                                %%
    \addcontentsline{toc}{part}{\appendixname}%                                     %%
}%                                                                                  %%
\makeatother%																		%%
%% don't clearpage if openany and two/one-side 										%%
%\makeatletter%																		%%
%\patchcmd{\scr@startchapter}%														%%
%{\if@openright\cleardoublepage\else\clearpage\fi}% search							%%
%{\if@openright\cleardoublepage\else\fi}% replace									%%
%{}{}%																				%%
%%																					%%
%\makeatother








%% -------------------------- Part-/Chapter-/...-styles --------------------------- %%
\addtokomafont{disposition}{\boldmath\bfseries\sffamily}%                           %%
%% ----------------------------- SectionCommand: Part ----------------------------- %%
\RedeclareSectionCommand[%                                                          %%
    font=\usekomafont{disposition}\boldmath\bfseries\Large\color{\TUMcolor{2}},%    %%
    prefixfont=\usekomafont{disposition}\boldmath\bfseries\LARGE\color{\TUMcolor{2}}%
]{part}%                                                                            %%
%% --------------------------- SectionCommand: Chapter ---------------------------- %%
\RedeclareSectionCommand[%                                                          %%
    font=\usekomafont{disposition}\boldmath\bfseries\Large\color{\TUMcolor{2}},%    %%
    prefixfont=\usekomafont{disposition}\boldmath\bfseries\LARGE\color{\TUMcolor{2}}%%
    % = chapternumber (prefix + next two higher font size (see: chapterformat))     %%
]{chapter}%                                                                         %%
%% --------------------------- SectionCommand: Section ---------------------------- %%
\RedeclareSectionCommand[%                                                          %%
    font=\usekomafont{disposition},%                                                %%
]{section}%                                                                         %%
%% --------------------------- SectionCommand: Subsection ------------------------- %%
\RedeclareSectionCommand[%                                                          %%
    font=\usekomafont{disposition},%                                                %%
]{subsection}%                                                                      %%
%% --------------------------- SectionCommand: Subsubsection ---------------------- %%
\RedeclareSectionCommand[%                                                          %%
    font=\usekomafont{disposition},%                                                %%
]{subsubsection}%                                                                   %%
%% -------------------------- SectionCommand: Paragraph --------------------------- %%
\makeatletter%                                                                      %%
\RedeclareSectionCommand[%                                                          %%
    font=\usekomafont{disposition},%                                                %%
    indent=\z@,%                                                                    %%
    afterskip=1.5ex \@plus .2ex,%                                                   %%
]{paragraph}%                                                                       %%
%% ------------------------ SectionCommand: Subparagraph -------------------------- %%
\RedeclareSectionCommand[%                                                          %%
    font=\usekomafont{disposition},%                                                %%
    indent=\z@,%                                                                    %%
    afterskip=1.5ex \@plus .2ex,%                                                   %%
]{subparagraph}%                                                                    %%
\makeatother%                                                                       %%







%% ================= Einfuegen von leeren Seiten (Twoside ?) ====================== %%
\makeatletter%                                                                      %%
\newcommand{\insertpage}{%                                                          %%
    \if@twoside%                                                                    %%
        {%                                                                          %%
            \cleardoubleemptypage%                                                  %%
            \thispagestyle{empty}%                                                  %%
            \quad%                                                                  %%
            \newpage%                                                               %%
            \cleardoubleemptypage%                                                  %%
        }%                                                                          %%
    \else%                                                                          %%
        \newpage%                                                                   %%
        \thispagestyle{empty}%                                                      %%
        \quad%                                                                      %%
        \newpage%                                                                   %%
    \fi%                                                                            %%
}%                                                                                  %%
\newcommand{\insertpageifodd}{%                                                     %%
    \if@twoside%                                                                    %%
        \ifthispageodd{\insertpage}{\newpage}%                                      %%
    \else%                                                                          %%
        \newpage%                                                                   %%
    \fi%                                                                            %%
}%                                                                                  %%
\newcommand{\insertpageifeven}{%                                                    %%
    \if@twoside%                                                                    %%
        \ifthispageodd{\newpage}{\insertpage}%                                      %%
    \else%                                                                          %%
        \newpage%                                                                   %%
    \fi%                                                                            %%
}%                                                                                  %%
\makeatother%                                                                       %%
%% ------------ Definition of the start of LOF/LOT/LOB/LOS/LOE/LOL/LOA ------------ %%
\makeatletter%                                                                      %%
\newcommand\TUMstartlo{%                                                            %%
    \newpage%                                                                       %%
    \insertpageifodd%                                                               %%
    %\phantomsection%                                                               %%
    %\addcontentsline{toc}{part}{%                                                  %%
    %    \iflanguage{english}{Lists}%                                               %%
    %    {}%                                                                        %%
    %    \iflanguage{naustrian}{Verzeichnisse}%                                     %%
    %    {}%                                                                        %%
    %}%                                                                             %%
}%                                                                                  %%
\makeatother%                                                                       %%


\RequirePackage{packages/tumlof}%                                                   %%
\RequirePackage{packages/tumlot}%                                                   %%
\RequirePackage{packages/tumlob}%                                                   %%
\RequirePackage{packages/tumtitlepageap1v0001}%                                     %%



%% ===================================== TUM ? ==================================== %%
%\tolerance 1414                                                                    %%
%\hbadness 1414                                                                     %%
%\emergencystretch 1.5em                                                            %%
%\hfuzz 0.3pt                                                                       %%
\widowpenalty=10000%                                                                %%
\clubpenalty=10000%                                                                 %%
\displaywidowpenalty=10000%                                                         %%
%\vfuzz \hfuzz                                                                      %%
\raggedbottom%                                                                      %%
\endinput%                                                                          %%